import{r as i,a as Ve,R as ee}from"./vendor-8a332d8f.js";import{_ as Ke}from"./utils-eeba12b3.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();var Fe={exports:{}},me={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xe=i,ze=Symbol.for("react.element"),Ge=Symbol.for("react.fragment"),Ye=Object.prototype.hasOwnProperty,Qe=Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Je={key:!0,ref:!0,__self:!0,__source:!0};function Re(e,r,s){var a,o={},n=null,c=null;s!==void 0&&(n=""+s),r.key!==void 0&&(n=""+r.key),r.ref!==void 0&&(c=r.ref);for(a in r)Ye.call(r,a)&&!Je.hasOwnProperty(a)&&(o[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps,r)o[a]===void 0&&(o[a]=r[a]);return{$$typeof:ze,type:e,key:n,ref:c,props:o,_owner:Qe.current}}me.Fragment=Ge;me.jsx=Re;me.jsxs=Re;Fe.exports=me;var t=Fe.exports,ye={},Ee=Ve;ye.createRoot=Ee.createRoot,ye.hydrateRoot=Ee.hydrateRoot;const Te=e=>{let r;const s=new Set,a=(h,b)=>{const v=typeof h=="function"?h(r):h;if(!Object.is(v,r)){const w=r;r=b??(typeof v!="object"||v===null)?v:Object.assign({},r,v),s.forEach(j=>j(r,w))}},o=()=>r,l={setState:a,getState:o,getInitialState:()=>m,subscribe:h=>(s.add(h),()=>s.delete(h))},m=r=e(a,o,l);return l},qe=e=>e?Te(e):Te,et=e=>e;function tt(e,r=et){const s=ee.useSyncExternalStore(e.subscribe,ee.useCallback(()=>r(e.getState()),[e,r]),ee.useCallback(()=>r(e.getInitialState()),[e,r]));return ee.useDebugValue(s),s}const Se=e=>{const r=qe(e),s=a=>tt(r,a);return Object.assign(s,r),s},Me=e=>e?Se(e):Se;function rt(e,r){let s;try{s=e()}catch{return}return{getItem:o=>{var n;const c=m=>m===null?null:JSON.parse(m,r==null?void 0:r.reviver),l=(n=s.getItem(o))!=null?n:null;return l instanceof Promise?l.then(c):c(l)},setItem:(o,n)=>s.setItem(o,JSON.stringify(n,r==null?void 0:r.replacer)),removeItem:o=>s.removeItem(o)}}const je=e=>r=>{try{const s=e(r);return s instanceof Promise?s:{then(a){return je(a)(s)},catch(a){return this}}}catch(s){return{then(a){return this},catch(a){return je(a)(s)}}}},st=(e,r)=>(s,a,o)=>{let n={storage:rt(()=>localStorage),partialize:y=>y,version:0,merge:(y,I)=>({...I,...y}),...r},c=!1;const l=new Set,m=new Set;let h=n.storage;if(!h)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),s(...y)},a,o);const b=()=>{const y=n.partialize({...a()});return h.setItem(n.name,{state:y,version:n.version})},v=o.setState;o.setState=(y,I)=>{v(y,I),b()};const w=e((...y)=>{s(...y),b()},a,o);o.getInitialState=()=>w;let j;const $=()=>{var y,I;if(!h)return;c=!1,l.forEach(k=>{var D;return k((D=a())!=null?D:w)});const H=((I=n.onRehydrateStorage)==null?void 0:I.call(n,(y=a())!=null?y:w))||void 0;return je(h.getItem.bind(h))(n.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==n.version){if(n.migrate){const D=n.migrate(k.state,k.version);return D instanceof Promise?D.then(F=>[!0,F]):[!0,D]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var D;const[F,K]=k;if(j=n.merge(K,(D=a())!=null?D:w),s(j,!0),F)return b()}).then(()=>{H==null||H(j,void 0),j=a(),c=!0,m.forEach(k=>k(j))}).catch(k=>{H==null||H(void 0,k)})};return o.persist={setOptions:y=>{n={...n,...y},y.storage&&(h=y.storage)},clearStorage:()=>{h==null||h.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>$(),hasHydrated:()=>c,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(m.add(y),()=>{m.delete(y)})},n.skipHydration||$(),j||w},Ie=st,nt=Me()(Ie((e,r)=>({projects:[],currentProject:null,isLoading:!1,createProject:(s,a)=>{const o={id:`project_${Date.now()}`,title:s,description:a||"",scriptContent:`FADE IN:

EXT. ${s.toUpperCase()} - DAY

A new story begins...

FADE OUT.`,createdAt:new Date,updatedAt:new Date,author:"Writer",genre:"Drama",pageCount:1,wordCount:8,characterCount:50};e(n=>({projects:[...n.projects,o],currentProject:o}))},updateProject:(s,a)=>{e(o=>{var n;return{projects:o.projects.map(c=>c.id===s?{...c,...a,updatedAt:new Date}:c),currentProject:((n=o.currentProject)==null?void 0:n.id)===s?{...o.currentProject,...a,updatedAt:new Date}:o.currentProject}})},deleteProject:s=>{e(a=>{var o;return{projects:a.projects.filter(n=>n.id!==s),currentProject:((o=a.currentProject)==null?void 0:o.id)===s?null:a.currentProject}})},setCurrentProject:s=>{e({currentProject:s})},updateScriptContent:s=>{const{currentProject:a}=r();if(!a)return;const o=s.split(/\\s+/).filter(m=>m.length>0).length,n=Math.ceil(s.split("\\n").length/55),c=s.length,l={scriptContent:s,wordCount:o,pageCount:n,characterCount:c,updatedAt:new Date};e(m=>({currentProject:{...a,...l},projects:m.projects.map(h=>h.id===a.id?{...h,...l}:h)}))},getProjectById:s=>r().projects.find(a=>a.id===s),duplicateProject:s=>{const{projects:a}=r(),o=a.find(n=>n.id===s);if(o){const n={...o,id:`project_${Date.now()}`,title:`${o.title} (Copy)`,createdAt:new Date,updatedAt:new Date};e(c=>({projects:[...c.projects,n]}))}},exportProject:(s,a)=>{const o=r().getProjectById(s);o&&console.log(`Exporting project ${o.title} as ${a}`)}}),{name:"hemantdoc-scriptwriter-projects",version:1})),at={theme:"light",fontSize:12,fontFamily:"Courier New",autoSave:!0,spellCheck:!0,wordWrap:!0,showLineNumbers:!1,showPageBreaks:!0},ot=Me()(Ie((e,r)=>({user:null,isAuthenticated:!1,isLoading:!1,setUser:s=>{e({user:s,isAuthenticated:!0,isLoading:!1})},logout:()=>{e({user:null,isAuthenticated:!1,isLoading:!1})},updateUserPreferences:s=>{const{user:a}=r();if(!a)return;const o={...a,preferences:{...a.preferences,...s}};e({user:o})},initializeUser:()=>{const{user:s}=r();s||e({user:{id:"demo-user",name:"Professional Writer",email:"writer@hemantdoc.com",preferences:at},isAuthenticated:!0,isLoading:!1})}}),{name:"hemantdoc-scriptwriter-auth",version:1}));let it={data:""},lt=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||it,ct=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,dt=/\/\*[^]*?\*\/|  +/g,Ae=/\n+/g,X=(e,r)=>{let s="",a="",o="";for(let n in e){let c=e[n];n[0]=="@"?n[1]=="i"?s=n+" "+c+";":a+=n[1]=="f"?X(c,n):n+"{"+X(c,n[1]=="k"?"":r)+"}":typeof c=="object"?a+=X(c,r?r.replace(/([^,])+/g,l=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,l):l?l+" "+m:m)):n):c!=null&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=X.p?X.p(n,c):n+":"+c+";")}return s+(r&&o?r+"{"+o+"}":o)+a},Z={},Ue=e=>{if(typeof e=="object"){let r="";for(let s in e)r+=s+Ue(e[s]);return r}return e},mt=(e,r,s,a,o)=>{let n=Ue(e),c=Z[n]||(Z[n]=(m=>{let h=0,b=11;for(;h<m.length;)b=101*b+m.charCodeAt(h++)>>>0;return"go"+b})(n));if(!Z[c]){let m=n!==e?e:(h=>{let b,v,w=[{}];for(;b=ct.exec(h.replace(dt,""));)b[4]?w.shift():b[3]?(v=b[3].replace(Ae," ").trim(),w.unshift(w[0][v]=w[0][v]||{})):w[0][b[1]]=b[2].replace(Ae," ").trim();return w[0]})(e);Z[c]=X(o?{["@keyframes "+c]:m}:m,s?"":"."+c)}let l=s&&Z.g?Z.g:null;return s&&(Z.g=Z[c]),((m,h,b,v)=>{v?h.data=h.data.replace(v,m):h.data.indexOf(m)===-1&&(h.data=b?m+h.data:h.data+m)})(Z[c],r,a,l),c},ut=(e,r,s)=>e.reduce((a,o,n)=>{let c=r[n];if(c&&c.call){let l=c(s),m=l&&l.props&&l.props.className||/^go/.test(l)&&l;c=m?"."+m:l&&typeof l=="object"?l.props?"":X(l,""):l===!1?"":l}return a+o+(c??"")},"");function ue(e){let r=this||{},s=e.call?e(r.p):e;return mt(s.unshift?s.raw?ut(s,[].slice.call(arguments,1),r.p):s.reduce((a,o)=>Object.assign(a,o&&o.call?o(r.p):o),{}):s,lt(r.target),r.g,r.o,r.k)}let We,Ne,ke;ue.bind({g:1});let V=ue.bind({k:1});function ht(e,r,s,a){X.p=r,We=e,Ne=s,ke=a}function z(e,r){let s=this||{};return function(){let a=arguments;function o(n,c){let l=Object.assign({},n),m=l.className||o.className;s.p=Object.assign({theme:Ne&&Ne()},l),s.o=/ *go\d+/.test(m),l.className=ue.apply(s,a)+(m?" "+m:""),r&&(l.ref=c);let h=e;return e[0]&&(h=l.as||e,delete l.as),ke&&h[0]&&ke(l),We(h,l)}return r?r(o):o}}var ft=e=>typeof e=="function",de=(e,r)=>ft(e)?e(r):e,pt=(()=>{let e=0;return()=>(++e).toString()})(),He=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");e=!r||r.matches}return e}})(),xt=20,Be=(e,r)=>{switch(r.type){case 0:return{...e,toasts:[r.toast,...e.toasts].slice(0,xt)};case 1:return{...e,toasts:e.toasts.map(n=>n.id===r.toast.id?{...n,...r.toast}:n)};case 2:let{toast:s}=r;return Be(e,{type:e.toasts.find(n=>n.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=r;return{...e,toasts:e.toasts.map(n=>n.id===a||a===void 0?{...n,dismissed:!0,visible:!1}:n)};case 4:return r.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==r.toastId)};case 5:return{...e,pausedAt:r.time};case 6:let o=r.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(n=>({...n,pauseDuration:n.pauseDuration+o}))}}},ce=[],Y={toasts:[],pausedAt:void 0},Q=e=>{Y=Be(Y,e),ce.forEach(r=>{r(Y)})},gt={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},bt=(e={})=>{let[r,s]=i.useState(Y),a=i.useRef(Y);i.useEffect(()=>(a.current!==Y&&s(Y),ce.push(s),()=>{let n=ce.indexOf(s);n>-1&&ce.splice(n,1)}),[]);let o=r.toasts.map(n=>{var c,l,m;return{...e,...e[n.type],...n,removeDelay:n.removeDelay||((c=e[n.type])==null?void 0:c.removeDelay)||(e==null?void 0:e.removeDelay),duration:n.duration||((l=e[n.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||gt[n.type],style:{...e.style,...(m=e[n.type])==null?void 0:m.style,...n.style}}});return{...r,toasts:o}},vt=(e,r="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(s==null?void 0:s.id)||pt()}),re=e=>(r,s)=>{let a=vt(r,e,s);return Q({type:2,toast:a}),a.id},L=(e,r)=>re("blank")(e,r);L.error=re("error");L.success=re("success");L.loading=re("loading");L.custom=re("custom");L.dismiss=e=>{Q({type:3,toastId:e})};L.remove=e=>Q({type:4,toastId:e});L.promise=(e,r,s)=>{let a=L.loading(r.loading,{...s,...s==null?void 0:s.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let n=r.success?de(r.success,o):void 0;return n?L.success(n,{id:a,...s,...s==null?void 0:s.success}):L.dismiss(a),o}).catch(o=>{let n=r.error?de(r.error,o):void 0;n?L.error(n,{id:a,...s,...s==null?void 0:s.error}):L.dismiss(a)}),e};var wt=(e,r)=>{Q({type:1,toast:{id:e,height:r}})},yt=()=>{Q({type:5,time:Date.now()})},te=new Map,jt=1e3,Nt=(e,r=jt)=>{if(te.has(e))return;let s=setTimeout(()=>{te.delete(e),Q({type:4,toastId:e})},r);te.set(e,s)},kt=e=>{let{toasts:r,pausedAt:s}=bt(e);i.useEffect(()=>{if(s)return;let n=Date.now(),c=r.map(l=>{if(l.duration===1/0)return;let m=(l.duration||0)+l.pauseDuration-(n-l.createdAt);if(m<0){l.visible&&L.dismiss(l.id);return}return setTimeout(()=>L.dismiss(l.id),m)});return()=>{c.forEach(l=>l&&clearTimeout(l))}},[r,s]);let a=i.useCallback(()=>{s&&Q({type:6,time:Date.now()})},[s]),o=i.useCallback((n,c)=>{let{reverseOrder:l=!1,gutter:m=8,defaultPosition:h}=c||{},b=r.filter(j=>(j.position||h)===(n.position||h)&&j.height),v=b.findIndex(j=>j.id===n.id),w=b.filter((j,$)=>$<v&&j.visible).length;return b.filter(j=>j.visible).slice(...l?[w+1]:[0,w]).reduce((j,$)=>j+($.height||0)+m,0)},[r]);return i.useEffect(()=>{r.forEach(n=>{if(n.dismissed)Nt(n.id,n.removeDelay);else{let c=te.get(n.id);c&&(clearTimeout(c),te.delete(n.id))}})},[r]),{toasts:r,handlers:{updateHeight:wt,startPause:yt,endPause:a,calculateOffset:o}}},Ct=V`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Et=V`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Tt=V`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,St=z("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ct} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Et} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Tt} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,At=V`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Lt=z("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${At} 1s linear infinite;
`,Dt=V`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Pt=V`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ot=z("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Dt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Pt} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,$t=z("div")`
  position: absolute;
`,Ft=z("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Rt=V`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Mt=z("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Rt} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,It=({toast:e})=>{let{icon:r,type:s,iconTheme:a}=e;return r!==void 0?typeof r=="string"?i.createElement(Mt,null,r):r:s==="blank"?null:i.createElement(Ft,null,i.createElement(Lt,{...a}),s!=="loading"&&i.createElement($t,null,s==="error"?i.createElement(St,{...a}):i.createElement(Ot,{...a})))},Ut=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Wt=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Ht="0%{opacity:0;} 100%{opacity:1;}",Bt="0%{opacity:1;} 100%{opacity:0;}",_t=z("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Zt=z("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Vt=(e,r)=>{let s=e.includes("top")?1:-1,[a,o]=He()?[Ht,Bt]:[Ut(s),Wt(s)];return{animation:r?`${V(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${V(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Kt=i.memo(({toast:e,position:r,style:s,children:a})=>{let o=e.height?Vt(e.position||r||"top-center",e.visible):{opacity:0},n=i.createElement(It,{toast:e}),c=i.createElement(Zt,{...e.ariaProps},de(e.message,e));return i.createElement(_t,{className:e.className,style:{...o,...s,...e.style}},typeof a=="function"?a({icon:n,message:c}):i.createElement(i.Fragment,null,n,c))});ht(i.createElement);var Xt=({id:e,className:r,style:s,onHeightUpdate:a,children:o})=>{let n=i.useCallback(c=>{if(c){let l=()=>{let m=c.getBoundingClientRect().height;a(e,m)};l(),new MutationObserver(l).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[e,a]);return i.createElement("div",{ref:n,className:r,style:s},o)},zt=(e,r)=>{let s=e.includes("top"),a=s?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:He()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(s?1:-1)}px)`,...a,...o}},Gt=ue`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,oe=16,Yt=({reverseOrder:e,position:r="top-center",toastOptions:s,gutter:a,children:o,containerStyle:n,containerClassName:c})=>{let{toasts:l,handlers:m}=kt(s);return i.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:oe,left:oe,right:oe,bottom:oe,pointerEvents:"none",...n},className:c,onMouseEnter:m.startPause,onMouseLeave:m.endPause},l.map(h=>{let b=h.position||r,v=m.calculateOffset(h,{reverseOrder:e,gutter:a,defaultPosition:r}),w=zt(b,v);return i.createElement(Xt,{id:h.id,key:h.id,onHeightUpdate:m.updateHeight,className:h.visible?Gt:"",style:w},h.type==="custom"?de(h.message,h):o?o(h):i.createElement(Kt,{toast:h,position:b}))}))},T=L;function Qt({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Jt=i.forwardRef(Qt),qt=Jt;function er({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const tr=i.forwardRef(er),rr=tr;function sr({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const nr=i.forwardRef(sr),ve=nr;function ar({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const or=i.forwardRef(ar),ir=or;function lr({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const cr=i.forwardRef(lr),dr=cr;function mr({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const ur=i.forwardRef(mr),Le=ur;function hr({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const fr=i.forwardRef(hr),pr=fr;function xr({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const gr=i.forwardRef(xr),br=gr;function vr({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const wr=i.forwardRef(vr),G=wr;function yr({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const jr=i.forwardRef(yr),De=jr;function Nr({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0 1 18 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0 1 18 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 0 1 6 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"}))}const kr=i.forwardRef(Nr),ie=kr;function Cr({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const Er=i.forwardRef(Cr),we=Er;function Tr({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const Sr=i.forwardRef(Tr),Ar=Sr;function Lr({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const Dr=i.forwardRef(Lr),Pr=Dr;function Or({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const $r=i.forwardRef(Or),le=$r;function Fr({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const Rr=i.forwardRef(Fr),Mr=Rr;function Ir({title:e,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const Ur=i.forwardRef(Ir),Wr=Ur,Pe=e=>{const r=e.split(`
`),s=[];let a=1;return r.forEach((o,n)=>{const c=o.trim();if(/^(INT\.|EXT\.)/i.test(c)){const l=c.match(/^(INT\.|EXT\.)\s+(.+?)\s*-\s*(.+)$/i),m=l?l[2]:c.replace(/^(INT\.|EXT\.)\s*/i,""),h=l?l[3]:"CONTINUOUS";s.push({sceneNumber:a++,lineIndex:n,content:c,location:m.trim(),timeOfDay:h.trim().toUpperCase()})}}),s},Oe={SceneHeading:{marginLeft:0,marginRight:72,textAlign:"left",textTransform:"uppercase",fontWeight:"bold",marginTop:24,marginBottom:0,color:"#0d47a1",bgColor:"#e3f2fd"},Character:{marginLeft:266,marginRight:0,textAlign:"left",textTransform:"uppercase",fontWeight:"bold",marginTop:12,marginBottom:0,color:"#c62828",bgColor:"#ffebee"},Dialogue:{marginLeft:108,marginRight:180,textAlign:"left",textTransform:"none",fontWeight:"normal",marginTop:0,marginBottom:0,color:"#4a148c",bgColor:"#f3e5f5"},Parenthetical:{marginLeft:144,marginRight:144,textAlign:"left",textTransform:"none",fontWeight:"normal",marginTop:0,marginBottom:0,color:"#e65100",bgColor:"#fff3e0"},Action:{marginLeft:0,marginRight:72,textAlign:"left",textTransform:"none",fontWeight:"normal",marginTop:12,marginBottom:0,color:"#1b5e20",bgColor:"#e8f5e8"},Transition:{marginLeft:360,marginRight:0,textAlign:"right",textTransform:"uppercase",fontWeight:"bold",marginTop:12,marginBottom:0,color:"#880e4f",bgColor:"#fce4ec"},Shot:{marginLeft:0,marginRight:72,textAlign:"left",textTransform:"uppercase",fontWeight:"bold",marginTop:12,marginBottom:0,color:"#01579b",bgColor:"#e1f5fe"}},_e=i.forwardRef(({value:e,onChange:r,isPreviewMode:s,className:a="",placeholder:o},n)=>{var ne,q,he;const[c,l]=i.useState([]),[m,h]=i.useState(0),[b,v]=i.useState(!1),w=i.useRef({}),j=i.useRef(null);i.useEffect(()=>{if(e&&e.trim()){const u=e.split(`
`),f=Pe(e),p=new Map;f.forEach(P=>{p.set(P.lineIndex,P.sceneNumber)});const g=u.map((P,S)=>({id:`line-${Date.now()}-${S}`,text:P,format:$(P),isActive:S===0,sceneNumber:p.get(S)}));l(g)}else l([{id:`line-${Date.now()}`,text:"",format:"Action",isActive:!0}])},[]);const $=i.useCallback(u=>{const f=u.trim();return f?/^(INT\.|EXT\.|FADE IN:|FADE OUT\.|CUT TO:)/i.test(f)?"SceneHeading":/^[A-Z][A-Z\s\-']{1,}(\s\(.*\))?$/.test(f)&&f.length<50?"Character":/^\(.*\)$/.test(f)?"Parenthetical":/^(CUT TO:|FADE TO:|DISSOLVE TO:|MATCH CUT:|SMASH CUT:|CUT TO|FADE TO|DISSOLVE TO)(.*)$/i.test(f)?"Transition":/^(CLOSE UP|WIDE SHOT|MEDIUM SHOT|ECU|EWS|POV|INSERT|ANGLE ON)/.test(f.toUpperCase())?"Shot":"Action":"Action"},[]),y=i.useCallback(u=>u.map(f=>f.text).join(`
`),[]),I=i.useCallback((u,f)=>{switch(u){case"SceneHeading":return"Action";case"Character":return f.trim()?"Dialogue":"Action";case"Dialogue":return"Action";case"Parenthetical":return"Dialogue";case"Action":return"Action";case"Transition":return"SceneHeading";case"Shot":return"Action";default:return"Action"}},[]),H=i.useCallback((u,f)=>{if(u==="Parenthetical"){const p=c[f-1];return p&&p.format==="Character"}if(u==="Transition"){const p=c[f-1];return p&&["Action","Dialogue","Shot"].includes(p.format)}return!0},[c]),k=i.useCallback((u,f)=>{if(!H(u,f)){if(u==="Parenthetical")return alert("Parenthetical can only be used directly after a Character line."),!1;if(u==="Transition")return alert("Transitions can only be used after Action, Dialogue, or Shot lines."),!1}return!0},[H]);i.useImperativeHandle(n,()=>({formatCurrentLine:u=>{k(u,m)&&(l(f=>{const p=[...f];if(p[m]){let g=p[m].text.trim();switch(u){case"SceneHeading":g=g.toUpperCase();break;case"Character":g=g.toUpperCase();break;case"Parenthetical":g&&!g.startsWith("(")&&(g=`(${g})`);break;case"Transition":g=g.toUpperCase(),g&&!g.endsWith(":")&&(g=`${g}:`);break;case"Shot":g=g.toUpperCase();break}p[m]={...p[m],text:g,format:u}}return p}),v(!0),setTimeout(()=>v(!1),2e3),setTimeout(()=>{var p;const f=w.current[(p=c[m])==null?void 0:p.id];f&&(f.focus(),f.setSelectionRange(f.value.length,f.value.length))},50))},insertTextAtCursor:u=>{var p;const f=w.current[(p=c[m])==null?void 0:p.id];if(f){const g=f.selectionStart||0,P=f.selectionEnd||0,S=c[m].text,R=S.substring(0,g)+u+S.substring(P);l(U=>{const A=[...U];return A[m]={...A[m],text:R},A}),setTimeout(()=>{f.setSelectionRange(g+u.length,g+u.length)},0)}},focus:()=>{var f;const u=w.current[(f=c[m])==null?void 0:f.id];u==null||u.focus()},getCurrentLine:()=>c[m]||null,getCurrentElementType:()=>{var u;return((u=c[m])==null?void 0:u.format)||"Action"},addNewLine:u=>{var g,P;const f=u||I(((g=c[m])==null?void 0:g.format)||"Action",((P=c[m])==null?void 0:P.text)||""),p={id:`line-${Date.now()}`,text:"",format:f,isActive:!0};l(S=>{const R=[...S];return R.splice(m+1,0,p),R.map((U,A)=>({...U,isActive:A===m+1}))}),h(m+1),setTimeout(()=>{const S=w.current[p.id];S==null||S.focus()},0)},handleKeyboardShortcut:u=>{const p={"cmd+1":"SceneHeading","cmd+2":"Action","cmd+3":"Character","cmd+4":"Dialogue","cmd+5":"Parenthetical","cmd+6":"Transition","cmd+7":"Shot"}[u];p&&n&&"current"in n&&n.current&&n.current.formatCurrentLine(p)}}));const D=i.useCallback((u,f)=>{l(p=>{const g=p.map(A=>A.id===u?{...A,text:f}:A),P=y(g),S=Pe(P),R=new Map;S.forEach(A=>{R.set(A.lineIndex,A.sceneNumber)});const U=g.map((A,d)=>({...A,sceneNumber:R.get(d)}));return setTimeout(()=>{r(y(U))},0),U})},[r,y]),F=i.useCallback((u,f)=>{if(u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),n&&"current"in n&&n.current&&n.current.addNewLine()),u.key==="ArrowUp"&&f>0&&(u.preventDefault(),h(f-1),setTimeout(()=>{var g;const p=w.current[(g=c[f-1])==null?void 0:g.id];p==null||p.focus()},0)),u.key==="ArrowDown"&&f<c.length-1&&(u.preventDefault(),h(f+1),setTimeout(()=>{var g;const p=w.current[(g=c[f+1])==null?void 0:g.id];p==null||p.focus()},0)),u.metaKey||u.ctrlKey){const p=`${u.metaKey?"cmd":"ctrl"}+${u.key.toLowerCase()}`;n&&"current"in n&&n.current&&n.current.handleKeyboardShortcut(p)}},[c,n]),K=i.useCallback(u=>{l(f=>f.map((p,g)=>({...p,isActive:g===u}))),h(u)},[]),se=i.useCallback(u=>{const f=Oe[u.format];return{fontFamily:"Courier New, monospace",fontSize:"12pt",lineHeight:"1.2",marginLeft:`${f.marginLeft}px`,marginRight:`${f.marginRight}px`,marginTop:`${f.marginTop}px`,marginBottom:`${f.marginBottom}px`,textAlign:f.textAlign,textTransform:f.textTransform,fontWeight:f.fontWeight,color:u.isActive?f.color:"#000",backgroundColor:u.isActive?f.bgColor:"transparent",borderLeft:u.isActive?`4px solid ${f.color}`:"none",paddingLeft:u.isActive?"8px":"0px",minHeight:"20px",width:"100%",border:"none",outline:"none",resize:"none",overflow:"hidden"}},[]);return s?t.jsx("div",{className:`flex-1 w-full p-8 overflow-y-auto bg-white ${a}`,children:c.map((u,f)=>t.jsx("div",{style:se(u),title:`Line ${f+1}: ${u.format}`,className:"mb-1",children:u.text||" "},u.id))}):t.jsxs("div",{className:`flex-1 flex flex-col ${a} relative`,ref:j,children:[b&&t.jsxs("div",{className:"absolute top-4 right-4 z-20 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg",children:["✓ Formatted as ",(ne=c[m])==null?void 0:ne.format]}),t.jsx("div",{className:"absolute top-2 right-2 z-10 bg-white/95 backdrop-blur-sm rounded-lg p-3 shadow-lg border-2",children:t.jsxs("div",{className:"text-xs font-mono",children:[t.jsxs("div",{className:"flex items-center mb-1",children:[t.jsx("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:Oe[((q=c[m])==null?void 0:q.format)||"Action"].color}}),t.jsx("span",{className:"font-bold text-sm",children:((he=c[m])==null?void 0:he.format)||"Action"})]}),t.jsxs("div",{className:"text-xs text-gray-600",children:["Line ",m+1," of ",c.length]})]})}),t.jsx("div",{className:"flex-1 w-full p-8 overflow-y-auto bg-white",children:t.jsx("div",{className:"max-w-4xl mx-auto space-y-1",children:c.map((u,f)=>t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{ref:p=>w.current[u.id]=p,value:u.text,onChange:p=>D(u.id,p.target.value),onFocus:()=>K(f),onKeyDown:p=>F(p,f),style:se(u),placeholder:"",rows:1,className:"block w-full",spellCheck:!1}),u.isActive&&t.jsx("div",{className:"absolute -left-8 top-0 text-xs text-gray-400 leading-5",children:f+1}),u.format==="SceneHeading"&&u.text.trim()&&t.jsx("div",{className:"absolute -left-16 top-0 text-xs font-bold text-blue-600 leading-5 bg-blue-50 px-2 py-1 rounded",children:(()=>{let p=1;for(let g=0;g<f;g++)c[g].format==="SceneHeading"&&c[g].text.trim()&&p++;return p})()})]},u.id))})}),t.jsx("div",{className:"p-4 border-t bg-gray-50",children:t.jsx("button",{onClick:()=>{n&&"current"in n&&n.current&&n.current.addNewLine()},className:"w-full py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-white rounded-lg transition-colors border-2 border-dashed border-gray-300 hover:border-gray-400",children:"+ Add New Line (Enter)"})})]})});_e.displayName="ProfessionalVerticalStackEditor";const $e={scene_heading:{marginLeft:0,marginRight:60,textAlign:"left",textTransform:"uppercase",fontWeight:"bold",marginTop:24,marginBottom:0},character:{marginLeft:220,marginRight:0,textAlign:"center",textTransform:"uppercase",fontWeight:"bold",marginTop:12,marginBottom:0},dialogue:{marginLeft:100,marginRight:120,textAlign:"left",textTransform:"none",fontWeight:"normal",marginTop:0,marginBottom:0},parenthetical:{marginLeft:160,marginRight:100,textAlign:"center",textTransform:"none",fontWeight:"normal",marginTop:0,marginBottom:0},action:{marginLeft:0,marginRight:60,textAlign:"left",textTransform:"none",fontWeight:"normal",marginTop:12,marginBottom:0},transition:{marginLeft:0,marginRight:0,textAlign:"right",textTransform:"uppercase",fontWeight:"bold",marginTop:12,marginBottom:0},shot:{marginLeft:0,marginRight:60,textAlign:"left",textTransform:"uppercase",fontWeight:"bold",marginTop:12,marginBottom:0}};function Hr(e,r,s){var o,n;const a=e.trim();if(!a)return"action";if(/^(INT\\.|EXT\\.|FADE IN:|FADE OUT\\.|CUT TO:)/i.test(a))return"scene_heading";if(/^[A-Z\\s']{2,}$/.test(a)&&a.length<50){const c=(o=r[s+1])==null?void 0:o.trim();if(c&&!/^[A-Z\\s']{2,}$/.test(c))return"character"}if(/^\\([^)]+\\)$/.test(a))return"parenthetical";if(/^(CUT TO:|FADE TO:|DISSOLVE TO:|SMASH CUT TO:)/.test(a))return"transition";if(s>0){const c=(n=r[s-1])==null?void 0:n.trim();if(c&&/^[A-Z\\s']{2,}$/.test(c))return"dialogue"}return/^(CLOSE UP|WIDE SHOT|MEDIUM SHOT|POV|INSERT)/i.test(a)?"shot":"action"}function Br(e,r){const s=e.trim();if(!s)return"";const a=$e[r]||$e.action;let o=s;a.textTransform==="uppercase"?o=o.toUpperCase():a.textTransform==="lowercase"&&(o=o.toLowerCase()),r==="parenthetical"&&!o.startsWith("(")&&(o=`(${o})`),r==="transition"&&!o.endsWith(":")&&!o.endsWith(".")&&(o=o+":");const n=Math.round(a.marginLeft/12);return" ".repeat(Math.max(0,n))+o}function _r(e){const r=e.split("\\n");return r.map((a,o)=>{const n=Hr(a,r,o);return Br(a,n)}).join("\\n")}const Zr=({onFormatShortcut:e,onFileOperation:r,onNavigation:s,onEditing:a,onSmartFeature:o,onProduction:n})=>{const c=i.useCallback(l=>{var w,j;const m=l.metaKey||l.ctrlKey,h=l.shiftKey,b=l.altKey,v=l.key.toLowerCase();if(!(l.target instanceof HTMLInputElement||l.target instanceof HTMLTextAreaElement&&!((w=l.target.dataset)!=null&&w.scriptEditor))){if(m&&!h&&!b)switch(v){case"1":l.preventDefault(),e("SceneHeading");break;case"2":l.preventDefault(),e("Action");break;case"3":l.preventDefault(),e("Character");break;case"4":l.preventDefault(),e("Dialogue");break;case"5":l.preventDefault(),e("Parenthetical");break;case"6":l.preventDefault(),e("Transition");break;case"7":l.preventDefault(),e("Shot");break}if(m&&h&&v==="f"&&(l.preventDefault(),o("autoFormat")),m&&!h&&!b)switch(v){case"n":l.preventDefault(),r("new");break;case"o":l.preventDefault(),r("open");break;case"s":l.preventDefault(),r("save");break;case"e":l.preventDefault(),r("exportPDF");break}if(m&&h&&!b)switch(v){case"s":l.preventDefault(),r("saveAs");break;case"e":l.preventDefault(),r("exportFDX");break}if(m&&b&&v==="e"&&(l.preventDefault(),r("exportTXT")),m&&!h&&!b)switch(v){case"p":l.preventDefault(),s("togglePreview");break;case"r":l.preventDefault(),s("viewRevisions");break;case"k":l.preventDefault(),s("keyboardShortcuts");break;case"f":l.preventDefault(),s("find");break;case"g":l.preventDefault(),s("findNext");break;case"l":l.preventDefault(),s("goToLine");break}if(m&&h&&v==="g"&&(l.preventDefault(),s("findPrevious")),v==="tab"&&(j=l.target.dataset)!=null&&j.scriptEditor&&(l.preventDefault(),o("acceptAutocomplete")),v==="escape"&&(l.preventDefault(),o("closeDialogs")),m&&v==="/"&&(l.preventDefault(),o("toggleComment")),m&&v==="d"&&(l.preventDefault(),o("duplicateLine")),m&&!h&&!b)switch(v){case"b":l.preventDefault(),n("scriptBreakdown");break;case"t":l.preventDefault(),n("createTask");break;case"m":l.preventDefault(),n("addNote");break}m&&h&&v==="b"&&(l.preventDefault(),n("autoBreakdownScene"))}},[e,r,s,a,o,n]);return i.useEffect(()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}),[c]),null},J={formatting:[{label:"Scene Heading",shortcut:"⌘+1"},{label:"Action",shortcut:"⌘+2"},{label:"Character",shortcut:"⌘+3"},{label:"Dialogue",shortcut:"⌘+4"},{label:"Parenthetical",shortcut:"⌘+5"},{label:"Transition",shortcut:"⌘+6"},{label:"Shot",shortcut:"⌘+7"},{label:"Auto-format entire script",shortcut:"⌘+⇧+F"}],fileOperations:[{label:"New script",shortcut:"⌘+N"},{label:"Open/Import script",shortcut:"⌘+O"},{label:"Save script",shortcut:"⌘+S"},{label:"Save As...",shortcut:"⌘+⇧+S"},{label:"Export as PDF",shortcut:"⌘+E"},{label:"Export as Final Draft",shortcut:"⌘+⇧+E"},{label:"Export as Text",shortcut:"⌘+⌥+E"}],navigation:[{label:"Toggle Preview mode",shortcut:"⌘+P"},{label:"View Revisions",shortcut:"⌘+R"},{label:"Keyboard shortcuts",shortcut:"⌘+K"},{label:"Find in script",shortcut:"⌘+F"},{label:"Find next",shortcut:"⌘+G"},{label:"Find previous",shortcut:"⌘+⇧+G"},{label:"Go to line",shortcut:"⌘+L"}],editing:[{label:"Accept autocomplete suggestion",shortcut:"Tab"},{label:"Navigate autocomplete suggestions",shortcut:"↑↓"},{label:"Close autocomplete/dialogs",shortcut:"Esc"},{label:"Undo",shortcut:"⌘+Z"},{label:"Redo",shortcut:"⌘+⇧+Z"},{label:"Select all",shortcut:"⌘+A"},{label:"Copy",shortcut:"⌘+C"},{label:"Paste",shortcut:"⌘+V"},{label:"Cut",shortcut:"⌘+X"}],smartFeatures:[{label:"Smart line break with proper indentation",shortcut:"Enter"},{label:"Simple line break",shortcut:"⇧+Enter"},{label:"Toggle comment/note",shortcut:"⌘+/"},{label:"Duplicate current line",shortcut:"⌘+D"}],production:[{label:"Open Script Breakdown",shortcut:"⌘+B"},{label:"Create Task",shortcut:"⌘+T"},{label:"Add Note/Comment",shortcut:"⌘+M"},{label:"Auto-breakdown current scene",shortcut:"⌘+⇧+B"}]};function Vr(){const{currentProject:e,createProject:r,updateScriptContent:s}=nt(),{user:a,initializeUser:o}=ot(),[n,c]=i.useState(""),[l,m]=i.useState(!1),[h,b]=i.useState(0),[v,w]=i.useState(1),[j,$]=i.useState(!1),[y,I]=i.useState(!1),[H,k]=i.useState(!1),[D,F]=i.useState(!1),K=i.useRef(null);i.useEffect(()=>{o(),e||r("My First Screenplay","A professional screenplay with industry-standard formatting")},[]),i.useEffect(()=>{e&&c(e.scriptContent)},[e]);const se=[{type:"SceneHeading",label:"Scene Heading",icon:ie,shortcut:"⌘1",color:"bg-blue-500"},{type:"Action",label:"Action",icon:Ar,shortcut:"⌘2",color:"bg-green-500"},{type:"Character",label:"Character",icon:Mr,shortcut:"⌘3",color:"bg-red-500"},{type:"Dialogue",label:"Dialogue",icon:dr,shortcut:"⌘4",color:"bg-purple-500"},{type:"Parenthetical",label:"Parenthetical",icon:G,shortcut:"⌘5",color:"bg-yellow-500"},{type:"Transition",label:"Transition",icon:rr,shortcut:"⌘6",color:"bg-pink-500"},{type:"Shot",label:"Shot",icon:ir,shortcut:"⌘7",color:"bg-indigo-500"}],ne=i.useCallback(d=>{c(d);const x=d.split(/\\s+/).filter(C=>C.length>0).length,N=Math.ceil(d.split("\\n").length/55);b(x),w(N),clearTimeout(window.saveTimer),window.saveTimer=setTimeout(()=>{s(d)},1e3)},[s]),q=d=>{console.log("🔥 Format button clicked in App:",d),console.log("📋 Script editor ref:",K.current),K.current?(console.log("✅ Calling formatCurrentLine..."),K.current.formatCurrentLine(d),T.success(`🎯 Formatted as ${d}`,{duration:2e3,style:{background:"#fed7aa",color:"#9a3412",fontWeight:"600"}})):(console.error("❌ Script editor ref is null!"),T.error("Editor not ready. Please try again."))};Zr({onFormatShortcut:d=>{q(d)},onFileOperation:d=>{switch(d){case"new":c(""),T.success("📄 New script created");break;case"save":T.success("💾 Script saved");break;case"exportPDF":A();break;case"exportTXT":R();break;case"exportFDX":U();break;default:T(`${d} feature coming soon!`,{icon:"ℹ️"})}},onNavigation:d=>{switch(d){case"togglePreview":m(!l);break;case"keyboardShortcuts":k(!0);break;case"find":T("🔍 Find feature coming soon!",{icon:"ℹ️"});break;default:T(`${d} feature coming soon!`,{icon:"ℹ️"})}},onEditing:d=>{T(`${d} handled by browser`,{icon:"ℹ️"})},onSmartFeature:d=>{switch(d){case"autoFormat":S();break;case"toggleComment":T("💬 Comment feature coming soon!",{icon:"ℹ️"});break;case"duplicateLine":T("📋 Duplicate line feature coming soon!",{icon:"ℹ️"});break;default:T(`${d} feature coming soon!`,{icon:"ℹ️"})}},onProduction:d=>{switch(d){case"scriptBreakdown":F(!0);break;default:T(`${d} feature coming soon!`,{icon:"ℹ️"})}}});const S=()=>{const d=_r(n);c(d),T.success("✨ Script formatted with industry standards!",{duration:3e3,style:{background:"#fed7aa",color:"#9a3412",fontWeight:"600"}})},R=()=>{const d=new Blob([n],{type:"text/plain"}),x=URL.createObjectURL(d),N=document.createElement("a");N.href=x,N.download="screenplay.txt",N.click(),URL.revokeObjectURL(x),T.success("📝 TXT file exported!",{duration:2e3})},U=()=>{const d=`<?xml version="1.0" encoding="UTF-8"?>
<FinalDraft DocumentType="Script" Template="No">
  <Content>
    <Paragraph Type="Scene Heading">
      <Text>${n.split(`
`)[0]}</Text>
    </Paragraph>
  </Content>
</FinalDraft>`,x=new Blob([d],{type:"application/xml"}),N=URL.createObjectURL(x),C=document.createElement("a");C.href=N,C.download="screenplay.fdx",C.click(),URL.revokeObjectURL(N),T.success("🎬 FDX file exported!",{duration:2e3})},A=async()=>{try{const{jsPDF:d}=await Ke(()=>import("./utils-eeba12b3.js").then(B=>B.j),[],import.meta.url),x=new d("portrait","pt","letter"),N=612,C=792,W=90,ae=54,fe=54,Ze=12;let M=fe+36;x.setFont("courier","bold"),x.setFontSize(24);const pe=C/2-100;x.text("PROFESSIONAL SCREENPLAY",N/2,pe,{align:"center"}),x.setFont("courier","normal"),x.setFontSize(12),x.text("Written with HemantDoc ScriptWriter Pro",N/2,pe+60,{align:"center"}),x.text("Professional Formatting System",N/2,pe+80,{align:"center"}),x.addPage(),M=fe+36;const xe=n.split("\\n"),Ce=B=>{const O=B.trim();return O?/^(INT\.|EXT\.|FADE IN:|FADE OUT\.|CUT TO:)/i.test(O)?"SceneHeading":/^[A-Z][A-Z\s\-']{1,}(\s\(.*\))?$/.test(O)&&O.length<50?"Character":/^\(.*\)$/.test(O)?"Parenthetical":/^(CUT TO:|FADE TO:|DISSOLVE TO:|MATCH CUT:|SMASH CUT:|CUT TO|FADE TO|DISSOLVE TO)(.*)$/i.test(O)?"Transition":/^(CLOSE UP|WIDE SHOT|MEDIUM SHOT|ECU|EWS|POV|INSERT|ANGLE ON)/.test(O.toUpperCase())?"Shot":"Action":"Action"};for(let B=0;B<xe.length;B++){const O=xe[B];if(!O.trim())continue;let ge=Ce(O);if(ge==="Action"&&O.trim()&&B>0){const be=xe[B-1].trim();Ce(be)==="Character"&&(ge="Dialogue")}let _=W,E=O.trim();switch(ge){case"SceneHeading":E=E.toUpperCase(),x.setFont("courier","bold"),_=W+0,M+=24;break;case"Character":E=E.toUpperCase(),x.setFont("courier","bold"),_=W+266,M+=12;break;case"Dialogue":x.setFont("courier","normal"),_=W+108;break;case"Parenthetical":E.startsWith("(")||(E="("+E),E.endsWith(")")||(E=E+")"),x.setFont("courier","normal"),_=W+144;break;case"Action":x.setFont("courier","normal"),_=W+0,M+=12;break;case"Transition":E=E.toUpperCase(),!E.endsWith(":")&&!E.includes(":")&&(E=E+":"),x.setFont("courier","bold");const be=x.getTextWidth(E);_=N-ae-be,M+=12;break;case"Shot":E=E.toUpperCase(),x.setFont("courier","bold"),_=W+0,M+=12;break;default:x.setFont("courier","normal"),_=W+0,M+=6;break}M>C-100&&(x.addPage(),M=fe),x.setFontSize(12),x.text(E,_,M),M+=Ze}x.save("professional-screenplay.pdf"),T.success("📄 Professional PDF exported!",{duration:3e3,style:{background:"#dcfce7",color:"#166534",fontWeight:"600"}})}catch(d){console.error("PDF export failed:",d),T.error("❌ PDF export failed. Please try again.")}};return t.jsxs("div",{className:"h-screen flex flex-col",style:{background:"linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%)"},children:[t.jsx(Yt,{position:"top-right"}),t.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-orange-600 shadow-lg",children:t.jsx("div",{className:"max-w-7xl mx-auto px-6",children:t.jsxs("div",{className:"flex items-center justify-between h-16",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-lg",children:t.jsx(G,{className:"h-6 w-6 text-orange-500"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-white drop-shadow-sm",children:"HemantDoc ScriptWriter Pro"}),t.jsx("p",{className:"text-sm text-orange-100",children:"Professional Screenplay Formatting System"})]})]})}),t.jsxs("div",{className:"hidden md:flex items-center space-x-8 text-white",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold",children:h}),t.jsx("div",{className:"text-xs text-orange-100",children:"WORDS"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold",children:v}),t.jsx("div",{className:"text-xs text-orange-100",children:"PAGES"})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>$(!j),className:"flex items-center px-4 py-2 bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 rounded-lg transition-all",children:[t.jsx(le,{className:"h-4 w-4 mr-2"}),"Quick Actions",t.jsx(Le,{className:"h-3 w-3 ml-1"})]}),j&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-orange-200 z-50",children:t.jsxs("div",{className:"py-2",children:[t.jsxs("button",{onClick:S,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-orange-50 flex items-center",children:[t.jsx(le,{className:"h-4 w-4 mr-2 text-orange-500"}),"Auto-Format Script"]}),t.jsxs("button",{onClick:()=>k(!0),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-orange-50 flex items-center",children:[t.jsx(we,{className:"h-4 w-4 mr-2 text-blue-500"}),"Keyboard Shortcuts"]}),t.jsxs("button",{onClick:()=>F(!0),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-orange-50 flex items-center",children:[t.jsx(ve,{className:"h-4 w-4 mr-2 text-green-500"}),"Scene Breakdown"]})]})})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>I(!y),className:"flex items-center px-4 py-2 bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 rounded-lg transition-all",children:[t.jsx(qt,{className:"h-4 w-4 mr-2"}),"Export",t.jsx(Le,{className:"h-3 w-3 ml-1"})]}),y&&t.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-xl border border-orange-200 z-50",children:t.jsxs("div",{className:"py-2",children:[t.jsxs("button",{onClick:A,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-orange-50 flex items-center",children:[t.jsx(G,{className:"h-4 w-4 mr-2 text-red-500"}),"Export PDF"]}),t.jsxs("button",{onClick:R,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-orange-50 flex items-center",children:[t.jsx(G,{className:"h-4 w-4 mr-2 text-blue-500"}),"Export TXT"]}),t.jsxs("button",{onClick:U,className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-orange-50 flex items-center",children:[t.jsx(ie,{className:"h-4 w-4 mr-2 text-purple-500"}),"Export FDX"]})]})})]}),t.jsxs("button",{onClick:()=>T.success("🔄 Version saved as v3.0.1",{duration:2e3}),className:"flex items-center px-4 py-2 bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 rounded-lg transition-all",children:[t.jsx(br,{className:"h-4 w-4 mr-2"}),"v4.0.0"]}),t.jsxs("button",{onClick:()=>m(!l),className:`flex items-center px-4 py-2 rounded-lg transition-all ${l?"bg-white text-orange-600 shadow-lg":"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30"}`,children:[t.jsx(De,{className:"h-4 w-4 mr-2"}),l?"Edit":"Preview"]})]})]})})}),t.jsxs("div",{className:"flex-1 flex",children:[t.jsx("div",{className:"w-64 bg-gradient-to-b from-orange-50 to-orange-100 border-r-2 border-orange-200 p-4 shadow-lg",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[t.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-3",children:"Quick Actions"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("button",{onClick:S,className:"w-full flex items-center px-3 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-sm",children:[t.jsx(le,{className:"h-4 w-4 mr-2"}),"Auto-Format Script"]}),t.jsxs("button",{onClick:()=>F(!0),className:"w-full flex items-center px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-sm",children:[t.jsx(ve,{className:"h-4 w-4 mr-2"}),"Scene Breakdown"]}),t.jsxs("button",{onClick:()=>T.success("🗓️ Schedule feature coming soon!",{duration:2e3}),className:"w-full flex items-center px-3 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all shadow-sm",children:[t.jsx(pr,{className:"h-4 w-4 mr-2"}),"Schedule"]}),t.jsxs("button",{onClick:()=>T.success("👥 Collaborate feature coming soon!",{duration:2e3}),className:"w-full flex items-center px-3 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all shadow-sm",children:[t.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Collaborate"]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[t.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-3",children:"Format Elements"}),t.jsx("div",{className:"space-y-1",children:se.map(d=>{const x=d.icon;return t.jsxs("button",{onClick:()=>q(d.type),className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-orange-50 hover:text-orange-800 rounded-lg transition-all group",title:`${d.label} (${d.shortcut})`,children:[t.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${d.color} group-hover:scale-110 transition-transform`}),t.jsx(x,{className:"h-4 w-4 mr-2 text-gray-500 group-hover:text-orange-600"}),t.jsx("span",{className:"flex-1 text-left",children:d.label}),t.jsx("span",{className:"text-xs text-gray-400 group-hover:text-orange-500",children:d.shortcut})]},d.type)})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[t.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-3",children:"Export Options"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("button",{onClick:A,className:"w-full flex items-center px-3 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all shadow-sm",children:[t.jsx(G,{className:"h-4 w-4 mr-2"}),"Export PDF"]}),t.jsxs("button",{onClick:R,className:"w-full flex items-center px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-sm",children:[t.jsx(G,{className:"h-4 w-4 mr-2"}),"Export TXT"]}),t.jsxs("button",{onClick:U,className:"w-full flex items-center px-3 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all shadow-sm",children:[t.jsx(ie,{className:"h-4 w-4 mr-2"}),"Export FDX"]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[t.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-3",children:"Help & Shortcuts"}),t.jsx("div",{className:"space-y-2",children:t.jsxs("button",{onClick:()=>k(!0),className:"w-full flex items-center px-3 py-2 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all shadow-sm",children:[t.jsx(we,{className:"h-4 w-4 mr-2"}),"Keyboard Shortcuts"]})})]})]})}),t.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:t.jsx("div",{className:"flex-1 p-8 flex flex-col",children:t.jsx("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-orange-200 flex-1 flex flex-col min-h-0",children:t.jsx(_e,{ref:K,value:n,onChange:ne,isPreviewMode:l,className:"flex-1 rounded-2xl"})})})})]}),H&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>k(!1),children:t.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:d=>d.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-3xl font-bold text-orange-800",children:"Keyboard Shortcuts"}),t.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"✕"})]}),t.jsxs("div",{className:"mb-4 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[t.jsx("p",{className:"text-sm text-orange-800 font-semibold",children:"Pro Tip:"}),t.jsx("p",{className:"text-sm text-orange-700",children:"All shortcuts work in both editing and preview modes"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-4 flex items-center",children:[t.jsx(ie,{className:"h-5 w-5 mr-2 text-blue-500"}),"Script Formatting"]}),t.jsx("div",{className:"space-y-2 text-sm",children:J.formatting.map((d,x)=>t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-700",children:d.label}),t.jsx("div",{className:"flex",children:d.shortcut.split("+").map((N,C)=>t.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded text-xs mx-0.5",children:N},C))})]},x))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-4 flex items-center",children:[t.jsx(G,{className:"h-5 w-5 mr-2 text-green-500"}),"File Operations"]}),t.jsx("div",{className:"space-y-2 text-sm",children:J.fileOperations.map((d,x)=>t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-700",children:d.label}),t.jsx("div",{className:"flex",children:d.shortcut.split("+").map((N,C)=>t.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded text-xs mx-0.5",children:N},C))})]},x))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-4 flex items-center",children:[t.jsx(De,{className:"h-5 w-5 mr-2 text-purple-500"}),"Navigation & View"]}),t.jsx("div",{className:"space-y-2 text-sm",children:J.navigation.map((d,x)=>t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-700",children:d.label}),t.jsx("div",{className:"flex",children:d.shortcut.split("+").map((N,C)=>t.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded text-xs mx-0.5",children:N},C))})]},x))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-4 flex items-center",children:[t.jsx(we,{className:"h-5 w-5 mr-2 text-red-500"}),"Editing"]}),t.jsx("div",{className:"space-y-2 text-sm",children:J.editing.map((d,x)=>t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-700",children:d.label}),t.jsx("div",{className:"flex",children:d.shortcut.split("+").map((N,C)=>t.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded text-xs mx-0.5",children:N},C))})]},x))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-4 flex items-center",children:[t.jsx(le,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Smart Features"]}),t.jsx("div",{className:"space-y-2 text-sm",children:J.smartFeatures.map((d,x)=>t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-700",children:d.label}),t.jsx("div",{className:"flex",children:d.shortcut.split("+").map((N,C)=>t.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded text-xs mx-0.5",children:N},C))})]},x))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-4 flex items-center",children:[t.jsx(ve,{className:"h-5 w-5 mr-2 text-indigo-500"}),"Production Tools"]}),t.jsx("div",{className:"space-y-2 text-sm",children:J.production.map((d,x)=>t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-700",children:d.label}),t.jsx("div",{className:"flex",children:d.shortcut.split("+").map((N,C)=>t.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded text-xs mx-0.5",children:N},C))})]},x))})]})]}),t.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[t.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Quick Start Tips"}),t.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[t.jsx("li",{children:'• Type "INT." or "EXT." and the line will auto-format as a scene heading'}),t.jsx("li",{children:"• Character names in ALL CAPS will be auto-detected and formatted"}),t.jsx("li",{children:"• Press Tab to accept autocomplete suggestions"}),t.jsx("li",{children:"• Use Enter after character names for automatic dialogue indentation"}),t.jsx("li",{children:"• The script auto-saves every 2 seconds while typing"})]}),t.jsx("div",{className:"mt-3 text-center",children:t.jsx("button",{onClick:()=>k(!1),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Got it, thanks!"})})]})]})}),D&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>F(!1),children:t.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-4xl w-full mx-4 h-3/4 overflow-y-auto",onClick:d=>d.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-orange-800",children:"Scene Breakdown & Analysis"}),t.jsx("button",{onClick:()=>F(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[t.jsx("h3",{className:"font-semibold text-orange-800 mb-2",children:"Script Statistics"}),t.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Total Lines:"})," ",n.split(`
`).length]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Scene Headings:"})," ",n.split(`
`).filter(d=>/^(INT\.|EXT\.)/i.test(d.trim())).length]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Characters:"})," ",Array.from(new Set(n.split(`
`).filter(d=>/^[A-Z][A-Z\s\-']{1,}(\s\(.*\))?$/.test(d.trim())&&d.trim().length<50).map(d=>d.trim().replace(/\s\(.*\)$/,"")))).length]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Dialogue Lines:"})," ",n.split(`
`).filter(d=>d.trim()&&!/^(INT\.|EXT\.|[A-Z][A-Z\s\-']{1,}(\s\(.*\))?$|\(.*\)|CUT TO:|FADE)/.test(d.trim())).length]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Scene Headings"}),t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.split(`
`).map((d,x)=>({line:d.trim(),index:x})).filter(d=>/^(INT\.|EXT\.)/i.test(d.line)).map((d,x)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("span",{className:"font-semibold text-blue-600",children:["Scene ",x+1]}),t.jsx("span",{className:"ml-3 text-gray-700 text-sm",children:d.line})]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Line ",d.index+1]})]},x))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Characters"}),t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Array.from(new Set(n.split(`
`).filter(d=>/^[A-Z][A-Z\s\-']{1,}(\s\(.*\))?$/.test(d.trim())&&d.trim().length<50).map(d=>d.trim().replace(/\s\(.*\)$/,"")))).sort().map((d,x)=>{const N=n.split(`
`).filter((C,W)=>{const ae=n.split(`
`)[W-1];return ae&&ae.trim().startsWith(d)&&C.trim()&&!C.trim().startsWith("(")}).length;return t.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[t.jsx("span",{className:"font-medium text-red-600",children:d}),t.jsxs("span",{className:"text-xs text-gray-500",children:[N," lines"]})]},x)})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Format Breakdown"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[t.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"font-bold text-blue-600 text-lg",children:n.split(`
`).filter(d=>/^(INT\.|EXT\.)/i.test(d.trim())).length}),t.jsx("div",{className:"text-blue-800 text-xs",children:"Scene Headings"})]}),t.jsxs("div",{className:"bg-red-50 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"font-bold text-red-600 text-lg",children:Array.from(new Set(n.split(`
`).filter(d=>/^[A-Z][A-Z\s\-']{1,}(\s\(.*\))?$/.test(d.trim())&&d.trim().length<50))).length}),t.jsx("div",{className:"text-red-800 text-xs",children:"Characters"})]}),t.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"font-bold text-yellow-600 text-lg",children:n.split(`
`).filter(d=>/^\(.*\)$/.test(d.trim())).length}),t.jsx("div",{className:"text-yellow-800 text-xs",children:"Parentheticals"})]}),t.jsxs("div",{className:"bg-pink-50 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"font-bold text-pink-600 text-lg",children:n.split(`
`).filter(d=>/^(CUT TO:|FADE TO:|DISSOLVE TO:)/i.test(d.trim())).length}),t.jsx("div",{className:"text-pink-800 text-xs",children:"Transitions"})]})]})]})]})]})}),t.jsx("div",{className:"bg-gradient-to-r from-orange-100 to-orange-200 border-t-2 border-orange-300 px-6 py-3",children:t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-6 text-orange-800",children:[t.jsx("span",{className:"font-semibold",children:"Format: Professional Screenplay"}),t.jsx("span",{children:"Font: Courier New 12pt"}),t.jsxs("span",{className:"flex items-center",children:[t.jsx(Pr,{className:"h-4 w-4 mr-1"}),"Vertical Line Stack • Real Screenplay Editor"]})]}),t.jsx("div",{className:"flex items-center space-x-6 text-orange-700",children:t.jsxs("span",{className:"font-bold text-orange-600 flex items-center",children:[t.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),"Critical Fixes Professional Editor v4.1.1"]})})]})})]})}ye.createRoot(document.getElementById("root")).render(t.jsx(ee.StrictMode,{children:t.jsx(Vr,{})}));
//# sourceMappingURL=index-e1849eec.js.map
